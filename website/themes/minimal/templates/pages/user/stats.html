{% extends "base.html" %}

<!-- prettier-ignore -->
{% block title %}User Statistics for I Want To Read More votes{% endblock %}
{% block description %}This page shows the live user statistics.{% endblock %}
{% block image %}{{ SITEURL }}/images/live-demo-screenshot.jpg{% endblock %}
{% block url %}{{ SITEURL }}/stats{% endblock %}

<!-- prettier-ignore -->
{% block content %}

<div class="bg-gray-200 flex-grow">
    <div class="py-6 mx-auto flex flex-wrap text-gray-700 px-2 md:px-4">
        <div class="w-full md:w-3/4 lg:w-1/2 lg:pl-2 mx-auto">
            <div
                class="w-full xl:w-4/5 mx-auto mt-6 px-2 md:px-5 pb-2 pt-8 md:pt-4 bg-white rounded-lg shadow-lg relative"
            >
                <h3 class="text-md font-bold text-center"></h3>
                <a class="reload-button absolute right-0 top-0 mr-2 mt-2 animate-spin" href="#">
                    {{ icons.reload("w-4") }}
                </a>
                <table class="w-full mt-6" id="template-table">
                    <thead>
                        <tr>
                            <th scope="col" class="pb-3 text-left">Topic <button class="link text-sm">▼</button></th>
                            <th scope="col" class="pb-3 text-right">Votes <button class="link text-sm">▼</button></th>
                            <th scope="col" class="pb-3 text-center">
                                Last Vote <button class="link text-sm">▼</button>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="3" class="text-center h-64">{{ icons.dots("animate-pulse w-16 mx-auto") }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

<!-- prettier-ignore -->
{% block scripts %}
<script src="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/js/stats.js"></script>
<script>
    function initStats() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        loadVotes(urlParams.get("user"), urlParams.get("project"));
    }

    if (document.readyState !== "loading") {
        initStats();
    } else {
        document.addEventListener("DOMContentLoaded", initStats);
    }
</script>
{% endblock scripts %}
